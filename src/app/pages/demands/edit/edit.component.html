<div class="edit">
  <form [formGroup]="userForm" (ngSubmit)="submitForm()">
    <h2>Editar Usuário</h2>

    <div class="input-field">
      <div class="input-group">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nome</mat-label>
          <input matInput placeholder="Digite o nome" formControlName="name" />
          @if (userForm.get('name')?.invalid && userForm.get('name')?.touched) {
          <mat-error>O nome deve ter pelo menos 3 caracteres</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Departamento</mat-label>
          <input
            matInput
            placeholder="Digite o departamento"
            formControlName="department"
          />
          @if (userForm.get('department')?.invalid &&
          userForm.get('department')?.touched) {
          <mat-error>Departamento é obrigatório</mat-error>
          }
        </mat-form-field>
      </div>

      <div class="input-group">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Telefone</mat-label>
          <input
            matInput
            type="tel"
            placeholder="Digite o telefone"
            formControlName="phone"
          />
          @if (userForm.get('phone')?.invalid && userForm.get('phone')?.touched)
          {
          <mat-error>Telefone inválido</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input
            matInput
            type="email"
            placeholder="Digite o email"
            formControlName="email"
          />
          @if (userForm.get('email')?.invalid && userForm.get('email')?.touched)
          {
          <mat-error>Email inválido</mat-error>
          }
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Permissão</mat-label>
        <mat-select formControlName="permission">
          @for (perm of permissions; track perm) {
          <mat-option [value]="perm">{{ perm }}</mat-option>
          }
        </mat-select>
        @if (userForm.get('permission')?.invalid &&
        userForm.get('permission')?.touched) {
        <mat-error>Selecione uma permissão</mat-error>
        }
      </mat-form-field>
    </div>

    <mat-dialog-actions align="end">
      <button mat-button (click)="close()">Cancelar</button>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="userForm.invalid"
      >
        Salvar
      </button>
    </mat-dialog-actions>
  </form>
</div>
